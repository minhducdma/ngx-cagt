<div class="mb-3">
    <nb-accordion>
        <nb-accordion-item expanded>
          <nb-accordion-item-header>
                Tìm kiếm
          </nb-accordion-item-header>
          <nb-accordion-item-body>
                <div class="row">
                    <div class="col-md-3 col-lg-3 col-xxxl-3 ">
                        <div class="row">
                            <div class="col-md-12 col-lg-12 pb-1">Từ khóa</div>
                            <div class="col-md-12 col-lg-12">
                                <input type="text" nbInput class="m-input form-control" [(ngModel)]="modelSearch.filter" />
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-lg-3 col-xxxl-3 ">
                        <div class="row">
                            <div class="col-md-12 col-lg-12 pb-1">Thời gian từ</div>
                            <div class="col-md-12 col-lg-12">
                                <input type="date" nbInput class="m-input form-control mr-2" [(ngModel)]="modelSearch.thoiGianTu" />
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-lg-3 col-xxxl-3 ">
                        <div class="row">
                            <div class="col-md-12 col-lg-12 pb-1">Thời gian đến</div>
                            <div class="col-md-12 col-lg-12">
                                <input type="date" nbInput class="m-input form-control mr-2" [(ngModel)]="modelSearch.thoiGianDen" />
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-lg-3 col-xxxl-3 ">
                        <div class="row">
                            <div class="col-md-12 col-lg-12 pb-1">Nguồn khách hàng</div>
                            <div class="col-md-12 col-lg-12">
                                <ngx-cagt-select
                                    [modeOfDropDowList]="dropdownListEnum.NGUON_KHACH_HANG"
                                    [isMulti]="true"
                                    [(ngModel)]="modelSearch.nguonKhachHangs">
                                </ngx-cagt-select>
                            </div>
                        </div>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-md-3 col-lg-3 col-xxxl-3 ">
                        <div class="row">
                            <div class="col-md-12 col-lg-12 pb-1">Loại khách hàng</div>
                            <div class="col-md-12 col-lg-12">
                                <ngx-cagt-select
                                    [modeOfDropDowList]="dropdownListEnum.LOAI_KHACH_HANG"
                                    [isMulti]="true"
                                    [(ngModel)]="modelSearch.loaiKhachHangs">
                                </ngx-cagt-select>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-lg-3 col-xxxl-3 ">
                        <div class="row">
                            <div class="col-md-12 col-lg-12 pb-1">Người phụ trách</div>
                            <div class="col-md-12 col-lg-12">
                                <ngx-cagt-select
                                    [modeOfDropDowList]="dropdownListEnum.NHAN_VIEN_PHU_TRACH"
                                    [isMulti]="true"
                                    [(ngModel)]="modelSearch.nguoiPhuTrachs">
                                </ngx-cagt-select>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-lg-3 col-xxxl-3 ">
                        <div class="row">
                            <div class="col-md-12 col-lg-12 pb-1">Trạng thái khách hàng</div>
                            <div class="col-md-12 col-lg-12">
                                <ngx-cagt-select
                                    [modeOfDropDowList]="dropdownListEnum.TRANG_THAI_KHACH_HANG"
                                    [isMulti]="true"
                                    [(ngModel)]="modelSearch.trangThaiKhachHangs">
                                </ngx-cagt-select>
                            </div>
                        </div>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-md-12 col-lg-12">
                        <div class="col-md-6 offset-md-3 text-center">
                            <button class="mr-2" nbButton size="small" status="primary" (click)="onSearchChangeGrid()">
                                <i class="fa fa-search mr-2"></i> Tìm kiếm
                            </button>
                            <button class="mr-2" nbButton size="small" status="warning" (click)="resetHandler()">
                                <i class="fas fa-redo-alt mr-2"></i> Làm mới
                            </button>
                        </div>
                    </div>
                </div>
          </nb-accordion-item-body>
        </nb-accordion-item>
    </nb-accordion>
</div>
<nb-card>
    <nb-card-header> Khách hàng </nb-card-header>
    <nb-card-body class="group-button">
        <div class="float-left">
            <button nbButton status="primary" size="small" (click)="addHandler()"><i class="fa fa-plus mr-2"></i> Thêm mới</button>
            <button nbButton status="info" size="small" [disabled]="selectionIds.length < 1" (click)="changeStudentSelectedHandler()">
                <i class="fa fa-graduation-cap mr-2"></i> Chuyển thành học viên
            </button>
            <button nbButton status="danger" size="small" (click)="removeSelectedHandler()" [disabled]="selectionIds.length < 1">
                <i class="fa fa-trash mr-2"></i> Xóa
            </button>
        </div>
        <div class="float-right">
            <button nbButton status="basic" size="small" (click)="importHandler()"><i
                class="fas fa-file-upload mr-2"></i>Import</button>
            <button nbButton status="success" size="small" (click)="exportHandler()"><i
                class="fas fa-file-download mr-2"></i>Export</button>
        </div>
    </nb-card-body>
    <nb-card-body>
        <nb-tabset (changeTab)="selectTab($event)">
            <nb-tab class="pl-0 pr-0" tabTitle="Tất cả" tabIcon="flip-outline">
                <kendo-grid [data]="gridView$" [resizable]="true" [pageSize]="gridState.take" [skip]="gridState.skip" [loading]="isLoading" [pageable]="true" [resizable]="true" kendoGridSelectBy="id" [selectable]="true" [selectedKeys]="selectionIds" (dataStateChange)="onStateChange($event)">
                    <kendo-grid-checkbox-column class="text-center" showSelectAll="true" [width]="50" [columnMenu]="false" [headerStyle]="{
                      'text-align': 'center'
                    }">

                    </kendo-grid-checkbox-column>
                    <kendo-grid-column class="text-center" [width]="80">
                        <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                            <button nbButton status="info" size="small" [matMenuTriggerFor]="menu">
                                    <i class="fa fa-bars"></i>
                                </button>
                            <mat-menu #menu="matMenu">
                                <button mat-menu-item class="button_box" (click)="changeStudentHandler(dataItem)">
                                    <div class="box_botton">
                                        <i class="fa fa-graduation-cap mr-2" style="width: 20px;"></i>Chuyển thành học viên
                                    </div>
                                </button>
                                <button mat-menu-item class="button_box" color="primary" (click)="editHandler(dataItem)">
                                    <div class="box_botton">
                                        <i class="fa fa-edit mr-2" style="width: 20px;"></i>Chỉnh sửa
                                    </div>
                                </button>
                                <button mat-menu-item class="button_box" (click)="removeHandler(dataItem)">
                                    <div class="box_botton">
                                        <i class="fa fa-trash mr-2" style="width: 20px;"></i>Xóa
                                    </div>
                                </button>
                            </mat-menu>
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column
                        title="STT"
                        [width]="60"
                        class="text-center"
                        [headerStyle]="{ 'text-align': 'center'}">
                        <ng-template kendoGridCellTemplate let-rowIndex="rowIndex">
                            {{ rowIndex + 1 }}
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column field="hoTen" title="Họ tên" [width]="180">
                    </kendo-grid-column>
                    <kendo-grid-column
                        field="ngaySinh"
                        title="Ngày sinh"
                        [width]="100"
                        class="text-center"
                        [headerStyle]="{'text-align': 'center'}">
                        <ng-template kendoGridCellTemplate let-dataItem>
                            {{ dataItem.ngaySinh | date: "dd/MM/yyyy" }}
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column field="soDienThoai" title="Số điện thoại" [width]="120">
                    </kendo-grid-column>
                    <kendo-grid-column field="email" title="Email" [width]="150">
                    </kendo-grid-column>
                    <kendo-grid-column field="loaiKhachHang" title="Loại khách hàng" [width]="140">
                    </kendo-grid-column>
                    <kendo-grid-column field="trangThaiKhachHang" title="Trạng thái" [width]="140">
                    </kendo-grid-column>
                    <ng-template kendoGridDetailTemplate let-dataItem>
                        <nb-tabset>
                            <nb-tab class="pl-0 pr-0" tabTitle="Thông tin chung">
                                <section>
                                    <div *ngIf="dataItem.hoTen != null && dataItem.hoTen != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Họ tên </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.hoTen }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.ngaySinh != null && dataItem.ngaySinh != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Ngày sinh </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem.ngaySinh | date: "dd/MM/yyyy" }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.hoTenBo != null && dataItem.hoTenBo != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Họ tên bố</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.hoTenBo }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.hoTenMe != null && dataItem.hoTenMe != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Họ tên mẹ</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.hoTenMe }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.soDienThoai != null && dataItem.soDienThoai != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Số điện thoại </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.soDienThoai }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.email != null && dataItem.email != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Email</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.email }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.taiKhoanMangXaHoi != null && dataItem.taiKhoanMangXaHoi != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Tài khoản mạng xã hội</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.taiKhoanMangXaHoi }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.trinhDo != null && dataItem.trinhDo != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Trình độ</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.trinhDo }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.nguonKhachHang != null && dataItem.nguonKhachHang != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Nguồn khách hàng </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.nguonKhachHang }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.loaiKhachHang != null && dataItem.loaiKhachHang != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Loại khách hàng </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.loaiKhachHang }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.nhanVienPhuTrach != null && dataItem.nhanVienPhuTrach != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Nhân viên phụ trách </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.nhanVienPhuTrach }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.trangThaiKhachHang != null && dataItem.trangThaiKhachHang != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Trạng thái khách hàng </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.trangThaiKhachHang }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.quanTamDuHoc != null && dataItem.quanTamDuHoc != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Quan tâm du học </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.quanTamDuHoc }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.diaChi != null && dataItem.diaChi != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Địa chỉ</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.diaChi }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.ghiChu != null && dataItem.ghiChu != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Ghi chú</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.ghiChu }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </nb-tab>
                            <nb-tab class="pl-0 pr-0" tabTitle="Thông tin CSKH">
                                <ngx-cham-soc-khach-hang [isChild]="true" [id]="dataItem.id" [kichBan]="dataItem.kichBanHienTai" (onComplete)="completeCSKH($event)"></ngx-cham-soc-khach-hang>
                            </nb-tab>
                        </nb-tabset>

                    </ng-template>
                </kendo-grid>
            </nb-tab>
            <nb-tab class="pl-0 pr-0" tabTitle="Kịch bản 1" tabIcon="film-outline">
                <kendo-grid 
                    [data]="gridViewKB1$" 
                    [resizable]="true" 
                    [pageSize]="gridState.take" 
                    [skip]="gridState.skip" 
                    [loading]="isLoading" 
                    [pageable]="true" 
                    [resizable]="true" 
                    kendoGridSelectBy="id" 
                    [selectable]="true" 
                    [selectedKeys]="selectionIds"
                    (dataStateChange)="onStateChange($event)">
                    <kendo-grid-checkbox-column class="text-center" showSelectAll="true" [width]="50" [columnMenu]="false" [headerStyle]="{
                      'text-align': 'center'
                    }">

                    </kendo-grid-checkbox-column>
                    <kendo-grid-column class="text-center" [width]="80">
                        <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                            <button nbButton status="info" size="small" [matMenuTriggerFor]="menu">
                                <i class="fa fa-bars"></i>
                            </button>
                            <mat-menu #menu="matMenu">
                                <button mat-menu-item class="button_box" (click)="changeStudentHandler(dataItem)">
                                    <div class="box_botton">
                                        <i class="fa fa-graduation-cap mr-2" style="width: 20px;"></i>Chuyển thành học viên
                                    </div>
                                </button>
                                <button mat-menu-item class="button_box" color="primary" (click)="editHandler(dataItem)">
                                    <div class="box_botton">
                                        <i class="fa fa-edit mr-2" style="width: 20px;"></i>Chỉnh sửa
                                    </div>
                                </button>
                                <button mat-menu-item class="button_box" (click)="removeHandler(dataItem)">
                                    <div class="box_botton">
                                        <i class="fa fa-trash mr-2" style="width: 20px;"></i>Xóa
                                    </div>
                                </button>
                            </mat-menu>
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column
                        title="STT"
                        [width]="60"
                        class="text-center"
                        [headerStyle]="{ 'text-align': 'center'}">
                        <ng-template kendoGridCellTemplate let-rowIndex="rowIndex">
                            {{ rowIndex + 1 }}
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column field="hoTen" title="Họ tên" [width]="180">
                    </kendo-grid-column>
                    <kendo-grid-column
                        field="ngaySinh"
                        title="Ngày sinh"
                        [width]="100"
                        class="text-center"
                        [headerStyle]="{'text-align': 'center'}">
                        <ng-template kendoGridCellTemplate let-dataItem>
                            {{ dataItem.ngaySinh | date: "dd/MM/yyyy" }}
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column field="soDienThoai" title="Số điện thoại" [width]="120">
                    </kendo-grid-column>
                    <kendo-grid-column field="email" title="Email" [width]="150">
                    </kendo-grid-column>
                    <kendo-grid-column field="loaiKhachHang" title="Loại khách hàng" [width]="140">
                    </kendo-grid-column>
                    <kendo-grid-column field="trangThaiKhachHang" title="Trạng thái" [width]="140">
                    </kendo-grid-column>
                    <ng-template kendoGridDetailTemplate let-dataItem>
                        <nb-tabset>
                            <nb-tab class="pl-0 pr-0" tabTitle="Thông tin chung">
                                <section>
                                    <div *ngIf="dataItem.hoTen != null && dataItem.hoTen != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Họ tên </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.hoTen }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.ngaySinh != null && dataItem.ngaySinh != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Ngày sinh </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem.ngaySinh | date: "dd/MM/yyyy" }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.hoTenBo != null && dataItem.hoTenBo != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Họ tên bố</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.hoTenBo }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.hoTenMe != null && dataItem.hoTenMe != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Họ tên mẹ</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.hoTenMe }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.soDienThoai != null && dataItem.soDienThoai != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Số điện thoại </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.soDienThoai }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.email != null && dataItem.email != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Email</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.email }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.taiKhoanMangXaHoi != null && dataItem.taiKhoanMangXaHoi != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Tài khoản mạng xã hội</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.taiKhoanMangXaHoi }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.trinhDo != null && dataItem.trinhDo != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Trình độ</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.trinhDo }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.nguonKhachHang != null && dataItem.nguonKhachHang != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Nguồn khách hàng </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.nguonKhachHang }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.loaiKhachHang != null && dataItem.loaiKhachHang != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Loại khách hàng </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.loaiKhachHang }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.nhanVienPhuTrach != null && dataItem.nhanVienPhuTrach != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Nhân viên phụ trách </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.nhanVienPhuTrach }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.trangThaiKhachHang != null && dataItem.trangThaiKhachHang != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Trạng thái khách hàng </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.trangThaiKhachHang }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.quanTamDuHoc != null && dataItem.quanTamDuHoc != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Quan tâm du học </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.quanTamDuHoc }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.diaChi != null && dataItem.diaChi != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Địa chỉ</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.diaChi }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.ghiChu != null && dataItem.ghiChu != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Ghi chú</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.ghiChu }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </nb-tab>
                            <nb-tab class="pl-0 pr-0" tabTitle="Thông tin CSKH">
                                <ngx-cham-soc-khach-hang [isChild]="true" [id]="dataItem.id" [kichBan]="dataItem.kichBanHienTai" (onComplete)="completeCSKH($event)"></ngx-cham-soc-khach-hang>
                            </nb-tab>
                        </nb-tabset>

                    </ng-template>
                </kendo-grid>
            </nb-tab>
            <nb-tab class="pl-0 pr-0" tabTitle="Kịch bản 2" tabIcon="film-outline">
                <kendo-grid [data]="gridViewKB2$" [resizable]="true" [pageSize]="gridState.take" [skip]="gridState.skip" [loading]="isLoading" [pageable]="true" [resizable]="true" kendoGridSelectBy="id" [selectable]="true" [selectedKeys]="selectionIds" (dataStateChange)="onStateChange($event)">
                    <kendo-grid-checkbox-column class="text-center" showSelectAll="true" [width]="50" [columnMenu]="false" [headerStyle]="{
                      'text-align': 'center'
                    }">

                    </kendo-grid-checkbox-column>
                    <kendo-grid-column class="text-center" [width]="80">
                        <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                            <button nbButton status="info" size="small" [matMenuTriggerFor]="menu">
                                <i class="fa fa-bars"></i>
                            </button>
                            <mat-menu #menu="matMenu">
                                <button mat-menu-item class="button_box" (click)="changeStudentHandler(dataItem)">
                                    <div class="box_botton">
                                        <i class="fa fa-graduation-cap mr-2" style="width: 20px;"></i>Chuyển thành học viên
                                    </div>
                                </button>
                                <button mat-menu-item class="button_box" color="primary" (click)="editHandler(dataItem)">
                                    <div class="box_botton">
                                        <i class="fa fa-edit mr-2" style="width: 20px;"></i>Chỉnh sửa
                                    </div>
                                </button>
                                <button mat-menu-item class="button_box" (click)="removeHandler(dataItem)">
                                    <div class="box_botton">
                                        <i class="fa fa-trash mr-2" style="width: 20px;"></i>Xóa
                                    </div>
                                </button>
                            </mat-menu>
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column
                        title="STT"
                        [width]="60"
                        class="text-center"
                        [headerStyle]="{ 'text-align': 'center'}">
                        <ng-template kendoGridCellTemplate let-rowIndex="rowIndex">
                            {{ rowIndex + 1 }}
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column field="hoTen" title="Họ tên" [width]="180">
                    </kendo-grid-column>
                    <kendo-grid-column
                        field="ngaySinh"
                        title="Ngày sinh"
                        [width]="100"
                        class="text-center"
                        [headerStyle]="{'text-align': 'center'}">
                        <ng-template kendoGridCellTemplate let-dataItem>
                            {{ dataItem.ngaySinh | date: "dd/MM/yyyy" }}
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column field="soDienThoai" title="Số điện thoại" [width]="120">
                    </kendo-grid-column>
                    <kendo-grid-column field="email" title="Email" [width]="150">
                    </kendo-grid-column>
                    <kendo-grid-column field="loaiKhachHang" title="Loại khách hàng" [width]="140">
                    </kendo-grid-column>
                    <kendo-grid-column field="trangThaiKhachHang" title="Trạng thái" [width]="140">
                    </kendo-grid-column>
                    <ng-template kendoGridDetailTemplate let-dataItem>
                        <nb-tabset>
                            <nb-tab class="pl-0 pr-0" tabTitle="Thông tin chung">
                                <section>
                                    <div *ngIf="dataItem.hoTen != null && dataItem.hoTen != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Họ tên </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.hoTen }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.ngaySinh != null && dataItem.ngaySinh != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Ngày sinh </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem.ngaySinh | date: "dd/MM/yyyy" }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.hoTenBo != null && dataItem.hoTenBo != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Họ tên bố</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.hoTenBo }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.hoTenMe != null && dataItem.hoTenMe != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Họ tên mẹ</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.hoTenMe }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.soDienThoai != null && dataItem.soDienThoai != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Số điện thoại </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.soDienThoai }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.email != null && dataItem.email != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Email</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.email }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.taiKhoanMangXaHoi != null && dataItem.taiKhoanMangXaHoi != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Tài khoản mạng xã hội</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.taiKhoanMangXaHoi }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.trinhDo != null && dataItem.trinhDo != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Trình độ</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.trinhDo }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.nguonKhachHang != null && dataItem.nguonKhachHang != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Nguồn khách hàng </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.nguonKhachHang }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.loaiKhachHang != null && dataItem.loaiKhachHang != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Loại khách hàng </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.loaiKhachHang }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.nhanVienPhuTrach != null && dataItem.nhanVienPhuTrach != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Nhân viên phụ trách </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.nhanVienPhuTrach }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.trangThaiKhachHang != null && dataItem.trangThaiKhachHang != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Trạng thái khách hàng </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.trangThaiKhachHang }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.quanTamDuHoc != null && dataItem.quanTamDuHoc != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Quan tâm du học </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.quanTamDuHoc }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.diaChi != null && dataItem.diaChi != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Địa chỉ</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.diaChi }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.ghiChu != null && dataItem.ghiChu != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Ghi chú</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.ghiChu }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </nb-tab>
                            <nb-tab class="pl-0 pr-0" tabTitle="Thông tin CSKH">
                                <ngx-cham-soc-khach-hang [isChild]="true" [id]="dataItem.id" [kichBan]="dataItem.kichBanHienTai" (onComplete)="completeCSKH($event)"></ngx-cham-soc-khach-hang>
                            </nb-tab>
                        </nb-tabset>

                    </ng-template>
                </kendo-grid>
            </nb-tab>
            <nb-tab class="pl-0 pr-0" tabTitle="Kịch bản 3" tabIcon="film-outline">
                <kendo-grid [data]="gridViewKB3$" [resizable]="true" [pageSize]="gridState.take" [skip]="gridState.skip" [loading]="isLoading" [pageable]="true" [resizable]="true" kendoGridSelectBy="id" [selectable]="true" [selectedKeys]="selectionIds" (dataStateChange)="onStateChange($event)">
                    <kendo-grid-checkbox-column class="text-center" showSelectAll="true" [width]="50" [columnMenu]="false" [headerStyle]="{
                      'text-align': 'center'
                    }">

                    </kendo-grid-checkbox-column>
                    <kendo-grid-column class="text-center" [width]="80">
                        <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                            <button nbButton status="info" size="small" [matMenuTriggerFor]="menu">
                                <i class="fa fa-bars"></i>
                            </button>
                            <mat-menu #menu="matMenu">
                                <button mat-menu-item class="button_box" (click)="changeStudentHandler(dataItem)">
                                    <div class="box_botton">
                                        <i class="fa fa-graduation-cap mr-2" style="width: 20px;"></i>Chuyển thành học viên
                                    </div>
                                </button>
                                <button mat-menu-item class="button_box" color="primary" (click)="editHandler(dataItem)">
                                    <div class="box_botton">
                                        <i class="fa fa-edit mr-2" style="width: 20px;"></i>Chỉnh sửa
                                    </div>
                                </button>
                                <button mat-menu-item class="button_box" (click)="removeHandler(dataItem)">
                                    <div class="box_botton">
                                        <i class="fa fa-trash mr-2" style="width: 20px;"></i>Xóa
                                    </div>
                                </button>
                            </mat-menu>
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column
                        title="STT"
                        [width]="60"
                        class="text-center"
                        [headerStyle]="{ 'text-align': 'center'}">
                        <ng-template kendoGridCellTemplate let-rowIndex="rowIndex">
                            {{ rowIndex + 1 }}
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column field="hoTen" title="Họ tên" [width]="180">
                    </kendo-grid-column>
                    <kendo-grid-column
                        field="ngaySinh"
                        title="Ngày sinh"
                        [width]="100"
                        class="text-center"
                        [headerStyle]="{'text-align': 'center'}">
                        <ng-template kendoGridCellTemplate let-dataItem>
                            {{ dataItem.ngaySinh | date: "dd/MM/yyyy" }}
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column field="soDienThoai" title="Số điện thoại" [width]="120">
                    </kendo-grid-column>
                    <kendo-grid-column field="email" title="Email" [width]="150">
                    </kendo-grid-column>
                    <kendo-grid-column field="loaiKhachHang" title="Loại khách hàng" [width]="140">
                    </kendo-grid-column>
                    <kendo-grid-column field="trangThaiKhachHang" title="Trạng thái" [width]="140">
                    </kendo-grid-column>
                    <ng-template kendoGridDetailTemplate let-dataItem>
                        <nb-tabset>
                            <nb-tab class="pl-0 pr-0" tabTitle="Thông tin chung">
                                <section>
                                    <div *ngIf="dataItem.hoTen != null && dataItem.hoTen != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Họ tên </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.hoTen }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.ngaySinh != null && dataItem.ngaySinh != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Ngày sinh </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem.ngaySinh | date: "dd/MM/yyyy" }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.hoTenBo != null && dataItem.hoTenBo != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Họ tên bố</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.hoTenBo }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.hoTenMe != null && dataItem.hoTenMe != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Họ tên mẹ</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.hoTenMe }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.soDienThoai != null && dataItem.soDienThoai != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Số điện thoại </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.soDienThoai }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.email != null && dataItem.email != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Email</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.email }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.taiKhoanMangXaHoi != null && dataItem.taiKhoanMangXaHoi != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Tài khoản mạng xã hội</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.taiKhoanMangXaHoi }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.trinhDo != null && dataItem.trinhDo != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Trình độ</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.trinhDo }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.nguonKhachHang != null && dataItem.nguonKhachHang != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Nguồn khách hàng </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.nguonKhachHang }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.loaiKhachHang != null && dataItem.loaiKhachHang != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Loại khách hàng </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.loaiKhachHang }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.nhanVienPhuTrach != null && dataItem.nhanVienPhuTrach != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Nhân viên phụ trách </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.nhanVienPhuTrach }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.trangThaiKhachHang != null && dataItem.trangThaiKhachHang != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Trạng thái khách hàng </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.trangThaiKhachHang }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.quanTamDuHoc != null && dataItem.quanTamDuHoc != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Quan tâm du học </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.quanTamDuHoc }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.diaChi != null && dataItem.diaChi != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Địa chỉ</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.diaChi }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.ghiChu != null && dataItem.ghiChu != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Ghi chú</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.ghiChu }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </nb-tab>
                            <nb-tab class="pl-0 pr-0" tabTitle="Thông tin CSKH">
                                <ngx-cham-soc-khach-hang [isChild]="true" [id]="dataItem.id" [kichBan]="dataItem.kichBanHienTai" (onComplete)="completeCSKH($event)"></ngx-cham-soc-khach-hang>
                            </nb-tab>
                        </nb-tabset>

                    </ng-template>
                </kendo-grid>
            </nb-tab>
            <nb-tab class="pl-0 pr-0" tabTitle="Kịch bản 4" tabIcon="film-outline">
                <kendo-grid [data]="gridViewKB4$" [resizable]="true" [pageSize]="gridState.take" [skip]="gridState.skip" [loading]="isLoading" [pageable]="true" [resizable]="true" kendoGridSelectBy="id" [selectable]="true" [selectedKeys]="selectionIds" (dataStateChange)="onStateChange($event)">
                    <kendo-grid-checkbox-column class="text-center" showSelectAll="true" [width]="50" [columnMenu]="false" [headerStyle]="{
                      'text-align': 'center'
                    }">

                    </kendo-grid-checkbox-column>
                    <kendo-grid-column class="text-center" [width]="80">
                        <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                            <button nbButton status="info" size="small" [matMenuTriggerFor]="menu">
                                <i class="fa fa-bars"></i>
                            </button>
                            <mat-menu #menu="matMenu">
                                <button mat-menu-item class="button_box" (click)="changeStudentHandler(dataItem)">
                                    <div class="box_botton">
                                        <i class="fa fa-graduation-cap mr-2" style="width: 20px;"></i>Chuyển thành học viên
                                    </div>
                                </button>
                                <button mat-menu-item class="button_box" color="primary" (click)="editHandler(dataItem)">
                                    <div class="box_botton">
                                        <i class="fa fa-edit mr-2" style="width: 20px;"></i>Chỉnh sửa
                                    </div>
                                </button>
                                <button mat-menu-item class="button_box" (click)="removeHandler(dataItem)">
                                    <div class="box_botton">
                                        <i class="fa fa-trash mr-2" style="width: 20px;"></i>Xóa
                                    </div>
                                </button>
                            </mat-menu>
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column
                        title="STT"
                        [width]="60"
                        class="text-center"
                        [headerStyle]="{ 'text-align': 'center'}">
                        <ng-template kendoGridCellTemplate let-rowIndex="rowIndex">
                            {{ rowIndex + 1 }}
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column field="hoTen" title="Họ tên" [width]="180">
                    </kendo-grid-column>
                    <kendo-grid-column
                        field="ngaySinh"
                        title="Ngày sinh"
                        [width]="100"
                        class="text-center"
                        [headerStyle]="{'text-align': 'center'}">
                        <ng-template kendoGridCellTemplate let-dataItem>
                            {{ dataItem.ngaySinh | date: "dd/MM/yyyy" }}
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column field="soDienThoai" title="Số điện thoại" [width]="120">
                    </kendo-grid-column>
                    <kendo-grid-column field="email" title="Email" [width]="150">
                    </kendo-grid-column>
                    <kendo-grid-column field="loaiKhachHang" title="Loại khách hàng" [width]="140">
                    </kendo-grid-column>
                    <kendo-grid-column field="trangThaiKhachHang" title="Trạng thái" [width]="140">
                    </kendo-grid-column>
                    <ng-template kendoGridDetailTemplate let-dataItem>
                        <nb-tabset>
                            <nb-tab class="pl-0 pr-0" tabTitle="Thông tin chung">
                                <section>
                                    <div *ngIf="dataItem.hoTen != null && dataItem.hoTen != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Họ tên </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.hoTen }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.ngaySinh != null && dataItem.ngaySinh != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Ngày sinh </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem.ngaySinh | date: "dd/MM/yyyy" }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.hoTenBo != null && dataItem.hoTenBo != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Họ tên bố</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.hoTenBo }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.hoTenMe != null && dataItem.hoTenMe != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Họ tên mẹ</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.hoTenMe }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.soDienThoai != null && dataItem.soDienThoai != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Số điện thoại </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.soDienThoai }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.email != null && dataItem.email != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Email</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.email }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.taiKhoanMangXaHoi != null && dataItem.taiKhoanMangXaHoi != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Tài khoản mạng xã hội</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.taiKhoanMangXaHoi }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.trinhDo != null && dataItem.trinhDo != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Trình độ</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.trinhDo }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.nguonKhachHang != null && dataItem.nguonKhachHang != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Nguồn khách hàng </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.nguonKhachHang }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.loaiKhachHang != null && dataItem.loaiKhachHang != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Loại khách hàng </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.loaiKhachHang }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.nhanVienPhuTrach != null && dataItem.nhanVienPhuTrach != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Nhân viên phụ trách </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.nhanVienPhuTrach }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.trangThaiKhachHang != null && dataItem.trangThaiKhachHang != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Trạng thái khách hàng </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.trangThaiKhachHang }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.quanTamDuHoc != null && dataItem.quanTamDuHoc != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">   Quan tâm du học </label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.quanTamDuHoc }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.diaChi != null && dataItem.diaChi != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Địa chỉ</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.diaChi }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="dataItem.ghiChu != null && dataItem.ghiChu != ''">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-3 col-xxxl-2 float-left custom_table">
                                                <label class="col-form-label">  Ghi chú</label>
                                                <span class="float-right">:</span>
                                            </div>
                                            <div class="col-md-12 col-lg-9 col-xxxl-2">
                                                <label class=" col-form-label lb-bold-info">
                                                    {{ dataItem?.ghiChu }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </nb-tab>
                            <nb-tab class="pl-0 pr-0" tabTitle="Thông tin CSKH">
                                <ngx-cham-soc-khach-hang [isChild]="true" [id]="dataItem.id" [kichBan]="dataItem.kichBanHienTai" (onComplete)="completeCSKH($event)"></ngx-cham-soc-khach-hang>
                            </nb-tab>
                        </nb-tabset>

                    </ng-template>
                </kendo-grid>
            </nb-tab>
        </nb-tabset>
    </nb-card-body>
</nb-card>
<div class="k-overlay" *ngIf="opened"></div>
<div class="wrapper form-layouts">
    <div kendoWindowContainer></div>
</div>
